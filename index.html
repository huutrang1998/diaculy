<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dia Cu Ly</title>
    <link rel="stylesheet" href="./index.css"> <!-- Importing the external CSS file -->
</head>

<body>
    <div class="container-zone">
        <div class="clock-zone">
            <div id="clock">
                <div id="center"></div>
                <div id="secondHand"></div>
                <div id="airplan"></div>
            </div>
        </div>
        <div class="text-zone">
            <div class="one-field">
                <span>V:</span> <input type="number" id="speed" name="speed" value="40" class="text-window" min="0"
                    maxlength="4" pattern="\d*" max="400" onkeyup="calculateSpeed()"> <span>m/s</span>
            </div>
            <div class="one-field">
                <span>D:</span><input type="number" id="distance" value="2400" class="text-window" min="0" maxlength="4"
                    pattern="\d*" max="8000" onkeyup="calculateSpeed()"><span>m</span>
            </div>
        </div>

        <div class="button-zone">
            <button id="stopButton">Dừng</button>
        </div>
    </div>

    <script>
        let isRotating = true;
        const secondHand = document.getElementById('secondHand');
        const stopButton = document.getElementById('stopButton');
        const airplan = document.getElementById('airplan');
        const tempSpeed = document.getElementById('speed').value;
        const tempDistance = document.getElementById('distance').value;

        let currentSpeed = tempDistance / tempSpeed;

        stopButton.addEventListener('click', () => {
            if (isRotating) {
                secondHand.style.animationPlayState = 'paused';
                airplan.style.animationPlayState = 'paused';
                stopButton.textContent = 'Tiếp Tục';
                stopButton.style.backgroundColor = "darkcyan";
            } else {
                secondHand.style.animationPlayState = 'running';
                airplan.style.animationPlayState = 'running';
                stopButton.textContent = 'Dừng';
                stopButton.style.backgroundColor = "#c50000";
            }
            isRotating = !isRotating;
        });

        function calculateSpeed() {
            const tempSpeed = document.getElementById('speed').value;
            const tempDistance = document.getElementById('distance').value;

            if (tempSpeed != 0) {
                currentSpeed = tempDistance / tempSpeed;
            }
            SaveSpeed();
        }

        function SaveSpeed() {
            let currentState = secondHand.style.animationPlayState;
            secondHand.style.animation = 'rotateSeconds ' + currentSpeed + 's linear infinite';
            airplan.style.animation = 'moveAround ' + currentSpeed + 's linear infinite';
            secondHand.style.animationPlayState = currentState;
            airplan.style.animationPlayState = currentState;
        }
    </script>
</body>
</html>
